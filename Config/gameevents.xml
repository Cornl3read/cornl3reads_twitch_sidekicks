<config>
	<set xpath="/gameevents/@max_entities">100</set>
	<append xpath="/gameevents">

	<action_sequence name="spawn_sidekick" template="spawn_single">
		<variable name="zombiename" value="animalWolfFriend" />
		<variable name="alertsound" value="wolfalert" />
		<variable name="gamestage" value="1" />
	</action_sequence>

	<action_sequence name="spawn_bigsidekick" template="spawn_single">
		<variable name="zombiename" value="animalBigWolfFriend" />
		<variable name="alertsound" value="wolfalert" />
		<variable name="gamestage" value="1" />
	</action_sequence>

	<action_sequence name="spawn_deadsidekick" template="spawn_single">
		<variable name="zombiename" value="animalDeadBearFriend" />
		<variable name="alertsound" value="bearalert" />
		<variable name="gamestage" value="1" />
	</action_sequence>



		<!-- Begin Thunderdome -->
	<action_sequence name="#thunderdome">
		<variable name="gamestage" value="1" />
		<property name="refund_inactivity" value="false"/>
		<property name="category" value="twitch_actions"/>

		<!-- Add all players in current party to group = goodGuys -->
		<action class="AddPartyToGroup">
			<property name="phase" value="0" />
			<property name="group_name" value="goodGuys" />
		</action>

		<action class="Delay">
			<property name="time" value="5" />
			<property name="phase" value="0" />
		</action>

		<!-- Alert so that they know it's coming -->
		<action class="PlaySound">
			<property name="sound" value="hulkalert, wolfalert" />
			<property name="phase" value="1" />
		</action>

		<action class="Delay">
			<property name="time" value="1" />
			<property name="phase" value="1" />
		</action>

		<!-- Spawn Direwolf x2 with Zombie only Aggro and add to group goodGuys -->
		<action class="SpawnEntity">
			<property name="phase" value="2" />
			<property name="min_distance" value="8" />
			<property name="max_distance" value="12" />
			<property name="entity_names" value="animalBigWolfFriend" param1="zombiename" />
			<property name="add_to_group" value="goodGuys" />
			<property name="spawn_count" value="2" />
			<property name="party_addition" value="1" />
		</action>

		<!-- 5 second wait for them to spawn -->
		<action class="Delay">
			<property name="time" value="5" />
			<property name="phase" value="2" />
		</action>

		<!-- First WAVE ~  ~  ~ happens where event was started -->
		<action class="SpawnEntity">
			<property name="phase" value="3" />
			<property name="min_distance" value="6" />
			<property name="max_distance" value="12" />
			<property name="entity_names" value="zombieArlene,zombieMarlene,zombiePartyGirl,zombieNurse,zombieYo" param1="zombiename" />
			<property name="add_to_group" value="badGuys" />
			<property name="spawn_count" value="20" />
			<property name="party_addition" value="1" />
		</action>

		<!-- Wait until all zombies from wave 1 are dead -->
		<action class="WaitForDead">
			<property name="target_group" value="badGuys" />
			<property name="phase_on_despawn" value="6" /><!-- will be changed later to last phase -->
			<property name="phase" value="4" />
		</action>

		<!-- Kill the sidekicks before the teleport so that they can be spawned fresh for next wave
		<action class="kill">
			<property name="phase" value="5" />
			<property name="entity_names" value="animalBigWolfFriend" param1="zombiename" />
			<property name="max_distance" value="20" />
		</action> -->

		<!-- Wait A Damn Second -->
		<action class="Delay">
			<property name="time" value="20" />
			<property name="phase" value="5" />
		</action>

		<!-- Bye Felecia -->
		<action class="RandomTeleport">
			<property name="target_group" value="goodGuys" />
			<property name="min_distance" value="25" /><!-- will be changed later to last phase -->
			<property name="max_distance" value="150" />
			<property name="phase" value="6" />
		</action>

		<!-- Wait A Damn Second -->
		<action class="Delay">
			<property name="time" value="3" />
			<property name="phase" value="6" />
		</action>

		<!-- Spawn fresh wolves -->
		<action class="SpawnEntity">
			<property name="phase" value="7" />
			<property name="min_distance" value="8" />
			<property name="max_distance" value="12" />
			<property name="entity_names" value="animalBigWolfFriend" param1="zombiename" />
			<property name="add_to_group" value="goodGuys" />
			<property name="spawn_count" value="2" />
			<property name="party_addition" value="1" />
		</action>

		<action class="Delay">
			<property name="time" value="5" />
			<property name="phase" value="7" />
		</action>

		<!-- Wave 2 ~ ~ ~ ~ Lil harder - ferals and cops, soldiers -->
		<action class="SpawnEntity">
			<property name="phase" value="3" />
			<property name="min_distance" value="6" />
			<property name="max_distance" value="12" />
			<property name="entity_names" value="zombieArlene,zombieMarlene,zombiePartyGirl,zombieSteveFeral,
				zombieNurse,zombieJoeFeral,zombieYo,zombieSoldierFeral,zombieSteveCrawler,zombieFatCop,zombieSoldier,
				zombieFatHawaiian,zombieFatHawaiianFeral" param1="zombiename" />
			<property name="add_to_group" value="badGuys" />
			<property name="spawn_count" value="40" />
			<property name="party_addition" value="1" />
		</action>


		<!-- to do
			Teleport group to POI - Thunderdome(need this!)
					RandomTeleport - Randomly teleports the target/target_group.
					min_distance - minimum distance they can teleport.
					max_distance - maximum distance they can teleport.

					TeleportToSpecial - teleports the target to special location. (Only works for players.)
					special_type - this can be Bedroll, Landclaim, or Backpack

	        spawn a few weak zombies outside in a diff group "Lurkers" to bang stuff for ambiance :)
			check if animalDireWolfFriend x2 still alive and spawn replacements
				NearbyEntities - Check if the Target has nearby entities.
					entity_tags - The entity tags of the nearby entities. (If no tag is supplied, defaults to any enemies or animals)
					max_distance - The maximum distance to check for nearby entities.
					target_is_owner - If the vehicle/turret is owned by the target.
			spawn a weapon and ammo crate t2 for each player
			sort group and spawn next zombie wave inside of dome with players
			add to group
			Rinse and repeat with meds as the crates or food
			waves intensify and animal friend eventually becomes a zombie bear
			then.... Epic Finale. You gonna die now
		-->


	</action_sequence>
    </append>
</config>
